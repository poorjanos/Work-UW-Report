---
title: "Ajánlat feldolgozás::beérkezéstõl menesztésig havi riport"
output: 
  flexdashboard::flex_dashboard:
    orientation: row
    vertical_layout: fill
    theme: spacelab
---

```{r setup, include=FALSE}
library(flexdashboard)
library(dplyr)
library(scales)
library(grid)
library(here)
library(ggplot2)
library(knitr)

# Import helper functions
source(here::here("R", "data_manipulation.R"), local = TRUE)
```


Áttekintés
===================================== 

Column {.sidebar data-width=300}
-------------------------------------

### Mirõl szól ez a riport?

* Az ajánlat feldolgozási folyamat központi és legerõforrásigényesebb része az ajánlat AFC-hez érkezésétõl a kötvényesítésig (menesztésig) tartó szakasz
* Ez a riport havonta követi az érkezéstõl menesztésig tartó szakasz
    + fõ teljesítménymutatóinak változását és
    + volumenének alakulását
* A riport külön tartalmi blokkban mutatja meg
    + a teljes folymatot (automatán és manuálisan kezelt folyamatágak egyben)
    + és csak a manuális folymatot (AFC core folyamata)

Row {data-height=200}
-------------------------------------

### Átfutási idõ átlag (utolsó zárt hónap)
```{r}
# Fetch data
t_page1 <- read.csv(here::here("Data", "t_page1.csv"), stringsAsFactors = FALSE)

# Plot
flexdashboard::valueBox(t_page1 %>% filter(MUTATÓ == "ÁTLAG", IDOSZAK == max(IDOSZAK)) %>% select(ÉRTÉK) %>% round(digits = 2), icon = "fa-line-chart")
```

### Átfutási idõ medián (utolsó zárt hónap)
```{r}
# Fetch data
t_page1 <- read.csv(here::here("Data", "t_page1.csv"), stringsAsFactors = FALSE)

# Plot
flexdashboard::valueBox(t_page1 %>% filter(MUTATÓ == "MEDIÁN", IDOSZAK == max(IDOSZAK)) %>% select(ÉRTÉK) %>% round(digits = 2), icon = "fa-line-chart")
```

### Volumen (utolsó zárt hónap)
```{r}
# Fetch data
t_page1 <- read.csv(here::here("Data", "t_page1.csv"), stringsAsFactors = FALSE)

# Plot
flexdashboard::valueBox(t_page1 %>% filter(MUTATÓ == "VOLUMEN", IDOSZAK == max(IDOSZAK)) %>% select(ÉRTÉK) %>% round(digits = 2), icon = "fa-bar-chart")
```   

Row {data-height=800}
-------------------------------------
### Kötvényesítési idõ beérkezéstõl menesztésig a teljes havi menesztett állományon
```{r fig.width=10}
# Fetch data
t_page1 <- read.csv(here::here("Data", "t_page1.csv"), stringsAsFactors = FALSE)

# Plot
gen_plot_ops(t_page1)
```



Teljes folyamat {.storyboard}
=========================================

### Ezen az ábrán külön mutatjuk meg az **automatikus** és a **manuális** folyamat fõ teljesítménymutatóit 

```{r, fig.width=10}
# Fetch data
t_page2_1 <- read.csv(here::here("Data", "t_page2_1.csv"), stringsAsFactors = FALSE)

# Plot
gen_plot_ops(t_page2_1, "UW_TIP")
```

***
* Az **automatikus kötvényesítés** az emberi munkavégzés nélküli, számítógépes algoritmusokkal történõ ajánlat feldolgozást jelenti
    + átfutási idõ szempontból a legoptimálisabb
    + sikeraránya kritikusan befolyásolja a manuális folyamatág volumenterhelését (errõl részletes havi elemzés ugyancsak elérhetõ az AC-ben)
* A **manuális kötvényesítés** az AFC core folyamata, ahol az ajánlatok kötvényesítése két kezelési ágon történhet meg:
    + Happy flow: az ajánlat **megszakítás nélkül** halad keresztül a folyamaton, hiánypótlás, hibakezelés nem szükséges (alapfolyamat)
    + Hibaág: az ajánlat feldolgozását meg kell szakítani és **csak külsõ input beérkezése esetén folytatható**, tipikusan hiánypótlás, hibakezelés (exception flow)



### Ezen az ábrán külön mutatjuk meg a **happy flow (alapfolyamat)** és a **hibaág** teljesítménymutatóit 

```{r, fig.width=10}
# Fetch data
t_page2_3 <- read.csv(here::here("Data", "t_page2_3.csv"), stringsAsFactors = FALSE)

# Plot
gen_plot_ops(t_page2_3, "FELDOLG_AG")
```

***
* Happy flow: az ajánlat **megszakítás nélkül** halad keresztül a folyamaton, hiánypótlás, hibakezelés nem szükséges
    + az automatikus kötvényesítési ág teljes egészében ide tartozik
    + a manuális kötvényesítési ág azon része tartozik ide, ahol a folymatot nem kell megszakítani
* Hibaág: az ajánlat feldolgozását meg kell szakítani és **csak külsõ input beérkezése esetén folytatható**, tipikusan hiánypótlás, hibakezelés (exception flow)


### Ezen az ábrán külön mutatjuk meg a négy fõ **termékvonal** teljesítménymutatóit 

```{r, fig.width=10}
# Fetch data
t_page2_2 <- read.csv(here::here("Data", "t_page2_2.csv"), stringsAsFactors = FALSE)

# Plot
gen_plot_ops(t_page2_2, "TERMCSOP")
```

***
* A termékcsoportok között jelentõs különbségek tapasztalhatók, mind a feldolgozott volumen, mind a kötvényesítés átfutási idejének szempontjából
* A Casco és Élet módoztok tipukusan lasabban kötvényesíthetõk, mint a Lakás  és GFB termékek



Manuális folyamat {.storyboard}
=========================================

### Ezen az ábrán külön mutatjuk meg a **happy flow (alapfolyamat)** és a **hibaág** teljesítménymutatóit csak a **manuális** folyamaton belül (AFC)

```{r, fig.width=10}
# Fetch data
t_page3_1 <- read.csv(here::here("Data", "t_page3_1.csv"), stringsAsFactors = FALSE)

# Plot
gen_plot_ops(t_page3_1, "FELDOLG_AG")
```

***
* Az AFC core folyamata két volumenben és feldolgozási sebességben jeltõsen eltérõ szegmensbõl áll
    + az állomány **80%-át** kitevõ happy flow-ban az AFC **kétszer olyan gyorsan** dolgozik, mint a **20%-ot** kitevõ hibaágon
    + a hibaágon kezelt ajánlatok esetében az AFC-nek várakoznia kell addig, amíg a hiányzó adat pótlásra, vagy a hibás adat javításra kerül (külsõ inputra várakozás)


### Ezen az ábrán **termékcsoportonként** mutatjuk meg a **happy flow (alapfolyamat)** és a **hibaág** teljesítménymutatóit csak a **manuális** folyamaton belül (AFC)

```{r, fig.width=10}
# Fetch data
t_page3_2 <- read.csv(here::here("Data", "t_page3_2.csv"), stringsAsFactors = FALSE)

# Plot
gen_plot_ops(t_page3_2, "SZEGMENS")
```

***
* A termékcsoportok között jelentõs különbség mutatkozik aszerint, hogy alap-, vagy hibaágon kerülnek kezelésre
* A leglassabb feldolgozás a GFB és az ÉLET módozatok hibaágán tapasztalható


### Ezen az ábrán a **manuális** feldolgozás (AFC) **erõforrásigényét** és **hatékonyságát** mutatjuk meg

```{r, fig.width=10}
# Fetch data
t_page3_3 <- read.csv(here::here("Data", "t_page3_3.csv"), stringsAsFactors = FALSE)

# Plot
gen_plot_ops_cost(t_page3_3)
```

***
* **Erõforrásigény:** adott idõszakban a feldolgozásban felhasznált teljes FTE (full-time equivalent = teljes állásban foglalkoztatott dolgozó)
    + az FTE érték nem egyenlõ a létszámszükséglettel, a szükséges nettó munkaerõt jelöli
    + a létszámigény számításához az FTE-t 1,3-as korrekciós együtthatóval kell szorozni, hogy megkapjuk a betegségek és szabadságok miatt kiesõ erõforrás pótlásának szükségletét is
* **Hatékonyság:** 1000 tétel menesztéséhez szükséges FTE, tehát az erõforrásigény darabszámmal normált (fajlagosított) értéke; megmutatja az összehasonlított dimenziók egymáshoz képesti erõforrásigényét, tehát a feldolgozás hatékonyságát


### Ezen az ábrán a **manuális** feldolgozás (AFC) **erõforrásigényét** és **hatékonyságát** mutatjuk meg **termékcsoportonként**

```{r, fig.width=10}
# Fetch data
t_page3_4 <- read.csv(here::here("Data", "t_page3_4.csv"), stringsAsFactors = FALSE)

# Plot
gen_plot_ops_cost(t_page3_4, "TERMCSOP")
```

***
* Az erõforrásigény összefügg a feldolgozott volumennel: nagyobb volumen nagyobb FTE igénnyel jár
* A termékcsoportok azonban jelentõsen eltérnek a hatékonyság tekintetében: az ÉLET módózatok lényegesen rosszabb erõforráshatékonysággal dolgozhatók fel, mint a nem-ÉLET módozatok


### Ezen az ábrán a **manuális** feldolgozás (AFC) **erõforrásigényét** és **hatékonyságát** mutatjuk meg **termékcsoportonként** és **folyamatáganként**

```{r, fig.width=10}
# Fetch data
t_page3_5 <- read.csv(here::here("Data", "t_page3_5.csv"), stringsAsFactors = FALSE)

# Plot
gen_plot_ops_cost(t_page3_5, "SZEGMENS")
```

***
* A manuális ágon a legrosszabb hatékonyságot az ÉLET módozatok hibaágán tapasztaljuk
* A nagy volumenterhelésû szegmensekben (LAKÁS és GFB alapág) dolgozik az AFC a legjobb hatékonysággal

